<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>du4tnr • du4tnr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="du4tnr">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">du4tnr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.0000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/du4tnr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>du4tnr</h1>
            
      

      <div class="d-none name"><code>du4tnr.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://manabdoli.github.io/du4tnr/">du4tnr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="idea">Idea<a class="anchor" aria-label="anchor" href="#idea"></a>
</h2>
<p>Through working with different cohort of student researchers in NAARE
program at CSUF, I recognized that while leaving students to do data
cleaning and pre-processing is a valuable part of their training, but it
becomes a nightmare when it comes to validating their final work
products.</p>
<p>To maintain some consistency and make their preprocessing choices
transparent, I created an R-package and named it <code>NACCdata</code>,
after <a href="https://naccdata.org/" class="external-link">NACC</a>, which is the
organization that provided us with the data. Since I did not have the
permission to share the data, I created a new, data-less package:
<code>du4tnr</code> (Data Utility for Transparency and Reproduciblity).
I also added a new feature for recording datasets/variables in a SQLite
database to facilitate sharing verified datasets among a large group of
collaborators.</p>
</div>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<div class="section level3">
<h3 id="cleands-clean-dataset-using-instructions-in-a-data-fream">
<code>cleanDS</code>: Clean Dataset using instructions in a
Data.Fream<a class="anchor" aria-label="anchor" href="#cleands-clean-dataset-using-instructions-in-a-data-fream"></a>
</h3>
<p>The main feature in the original package was to reduce selection,
renaming, setting missing values to NA, and redefining levels of
categorical variables. This was an important step as <code>NACC</code>
data had a large number of variables (1936) and it used numerical values
for presenting categorical variables and for all missing values.</p>
<p>Let’s use <code>mtcars</code> as an example:</p>
<ul>
<li>
<code>cleanMTcars</code> contains the instruction for cleaning
<code>mtcars</code>:
<ul>
<li>The first two rows show how categorical variables are turned into
factors with meaningful levels.</li>
<li>The last row shows how records with <code>gear==5</code> are
considered as <code>NA</code>.</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cleanMTcars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Name<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'vs'</span>, <span class="st">'am'</span>, <span class="st">'gear'</span><span class="op">)</span>,</span>
<span>  CurrentVal<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'0,1'</span>,<span class="st">'0,1'</span>,<span class="st">''</span><span class="op">)</span>,</span>
<span>  NewLevel<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'V-shape,Straight'</span>,<span class="st">'Manual,Automatic'</span>,<span class="st">''</span><span class="op">)</span>,</span>
<span>  NA_Vals<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">''</span>,<span class="st">''</span>,<span class="st">'5'</span><span class="op">)</span>,</span>
<span>  Rename<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Engine.Shape'</span>,<span class="st">'Transmission'</span>, <span class="st">'Forward.Gears'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cleanMTcars</span></span>
<span><span class="co">#&gt;   Name CurrentVal         NewLevel NA_Vals        Rename</span></span>
<span><span class="co">#&gt; 1   vs        0,1 V-shape,Straight          Engine.Shape</span></span>
<span><span class="co">#&gt; 2   am        0,1 Manual,Automatic          Transmission</span></span>
<span><span class="co">#&gt; 3 gear                                   5 Forward.Gears</span></span></code></pre></div>
<ul>
<li>
<code>cleanDS</code> uses the <code>cleanMTcars</code> to select,
clean and rename three variables:</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cleanDS.html">cleanDS</a></span><span class="op">(</span><span class="va">mtcars</span>, cleanDF<span class="op">=</span><span class="va">cleanMTcars</span>, Rename<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  Engine.Shape Transmission Forward.Gears</span></span>
<span><span class="co">#&gt; AMC Javelin           V-shape       Manual             3</span></span>
<span><span class="co">#&gt; Camaro Z28            V-shape       Manual             3</span></span>
<span><span class="co">#&gt; Pontiac Firebird      V-shape       Manual             3</span></span>
<span><span class="co">#&gt; Fiat X1-9            Straight    Automatic             4</span></span>
<span><span class="co">#&gt; Porsche 914-2         V-shape    Automatic            NA</span></span>
<span><span class="co">#&gt; Lotus Europa         Straight    Automatic            NA</span></span>
<span><span class="co">#&gt; Ford Pantera L        V-shape    Automatic            NA</span></span>
<span><span class="co">#&gt; Ferrari Dino          V-shape    Automatic            NA</span></span>
<span><span class="co">#&gt; Maserati Bora         V-shape    Automatic            NA</span></span>
<span><span class="co">#&gt; Volvo 142E           Straight    Automatic             4</span></span></code></pre></div>
<ul>
<li>
<code>CleanDS</code> can pass through other variables using
<code>addCols</code> parameter, and can skip renaming if needed
(<code>Rename=FALSE</code>):</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">processedMTcars</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cleanDS.html">cleanDS</a></span><span class="op">(</span><span class="va">mtcars</span>, cleanDF<span class="op">=</span><span class="va">cleanMTcars</span>,</span>
<span>                         Rename<span class="op">=</span><span class="cn">FALSE</span>, addCols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">processedMTcars</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;                         vs        am gear  mpg cyl  disp  hp drat    wt  qsec</span></span>
<span><span class="co">#&gt; Mazda RX4          V-shape Automatic    4 21.0   6 160.0 110 3.90 2.620 16.46</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag      V-shape Automatic    4 21.0   6 160.0 110 3.90 2.875 17.02</span></span>
<span><span class="co">#&gt; Datsun 710        Straight Automatic    4 22.8   4 108.0  93 3.85 2.320 18.61</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    Straight    Manual    3 21.4   6 258.0 110 3.08 3.215 19.44</span></span>
<span><span class="co">#&gt; Hornet Sportabout  V-shape    Manual    3 18.7   8 360.0 175 3.15 3.440 17.02</span></span>
<span><span class="co">#&gt; Valiant           Straight    Manual    3 18.1   6 225.0 105 2.76 3.460 20.22</span></span>
<span><span class="co">#&gt; Duster 360         V-shape    Manual    3 14.3   8 360.0 245 3.21 3.570 15.84</span></span>
<span><span class="co">#&gt; Merc 240D         Straight    Manual    4 24.4   4 146.7  62 3.69 3.190 20.00</span></span>
<span><span class="co">#&gt; Merc 230          Straight    Manual    4 22.8   4 140.8  95 3.92 3.150 22.90</span></span>
<span><span class="co">#&gt; Merc 280          Straight    Manual    4 19.2   6 167.6 123 3.92 3.440 18.30</span></span>
<span><span class="co">#&gt;                   carb</span></span>
<span><span class="co">#&gt; Mazda RX4            4</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag        4</span></span>
<span><span class="co">#&gt; Datsun 710           1</span></span>
<span><span class="co">#&gt; Hornet 4 Drive       1</span></span>
<span><span class="co">#&gt; Hornet Sportabout    2</span></span>
<span><span class="co">#&gt; Valiant              1</span></span>
<span><span class="co">#&gt; Duster 360           4</span></span>
<span><span class="co">#&gt; Merc 240D            2</span></span>
<span><span class="co">#&gt; Merc 230             2</span></span>
<span><span class="co">#&gt; Merc 280             4</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="sqlite-storage">SQLite Storage<a class="anchor" aria-label="anchor" href="#sqlite-storage"></a>
</h3>
<p>This feature is added to create a repository that can be shared with
other collaborator and save time in recreating commonly used datasets.
It can also increase the integrity of the data compared to the case that
CSV files are shared between colleagues.</p>
<p>Let’s start from scracth:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dbPath</span> <span class="op">&lt;-</span> <span class="st">'myProject.db'</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">dbPath</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="va">dbPath</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">closeAllConnections</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">dbPath</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">dbPath</span><span class="op">)</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">'Cannot remove '</span>, <span class="va">dbPath</span>, <span class="st">'!\n'</span>, </span>
<span>                             <span class="st">'Close it by `db_close()` or restart R.'</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a new SQLite database or open an existing one:</span></span>
<span><span class="va">projDB</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dbObj.html">dbObj</a></span><span class="op">(</span>dp_path <span class="op">=</span> <span class="va">dbPath</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">projDB</span><span class="op">)</span></span>
<span><span class="co">#&gt; SQLite Variable Storage Object</span></span>
<span><span class="co">#&gt; Database path: myProject.db </span></span>
<span><span class="co">#&gt; Connection status: Open </span></span>
<span><span class="co">#&gt; Stored items: 0 </span></span>
<span><span class="co">#&gt; Registered files: 0</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add mtcars, cleanMTcars, and processedMTcars to the database</span></span>
<span><span class="va">projDB</span><span class="op">$</span><span class="fu">add_var</span><span class="op">(</span>vname <span class="op">=</span> <span class="st">'MTCars0'</span>, value <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="co">#&gt; Saved variable: MTCars0</span></span>
<span><span class="va">projDB</span><span class="op">$</span><span class="fu">add_var</span><span class="op">(</span>vname <span class="op">=</span> <span class="st">'cleaningInstructions'</span>, value <span class="op">=</span> <span class="va">cleanMTcars</span><span class="op">)</span></span>
<span><span class="co">#&gt; Saved variable: cleaningInstructions</span></span>
<span><span class="va">projDB</span><span class="op">$</span><span class="fu">add_var</span><span class="op">(</span>vname <span class="op">=</span> <span class="st">'MTcars-Processed'</span>, value <span class="op">=</span> <span class="va">processedMTcars</span>, </span>
<span>               steps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rename and relabel `vs` and `am`"</span>, <span class="st">"set `gear==5` to `NA`"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Saved variable: MTcars-Processed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">projDB</span><span class="op">)</span></span>
<span><span class="co">#&gt; SQLite Variable Storage Object</span></span>
<span><span class="co">#&gt; Database path: myProject.db </span></span>
<span><span class="co">#&gt; Connection status: Open </span></span>
<span><span class="co">#&gt; Stored items: 3 </span></span>
<span><span class="co">#&gt; Registered files: 0 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; items:</span></span>
<span><span class="co">#&gt;                   name       type source_file                 created_at</span></span>
<span><span class="co">#&gt; 1              MTCars0 data.frame        &lt;NA&gt; 2025-06-29 23:52:34.083163</span></span>
<span><span class="co">#&gt; 2     MTcars-Processed data.frame        &lt;NA&gt; 2025-06-29 23:52:34.087589</span></span>
<span><span class="co">#&gt; 3 cleaningInstructions data.frame        &lt;NA&gt; 2025-06-29 23:52:34.085787</span></span>
<span><span class="co">#&gt;                   updated_at</span></span>
<span><span class="co">#&gt; 1 2025-06-29 23:52:34.083163</span></span>
<span><span class="co">#&gt; 2 2025-06-29 23:52:34.087589</span></span>
<span><span class="co">#&gt; 3 2025-06-29 23:52:34.085787</span></span></code></pre></div>
<p>Let’s close the database:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Close the database</span></span>
<span><span class="va">projDB</span><span class="op">$</span><span class="fu">close_db</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Database connection closed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">projDB</span><span class="op">)</span></span>
<span><span class="co">#&gt; SQLite Variable Storage Object</span></span>
<span><span class="co">#&gt; Database path: myProject.db </span></span>
<span><span class="co">#&gt; Connection status: Closed</span></span></code></pre></div>
<p>Let’s reuse it:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">projDB</span><span class="op">$</span><span class="fu">reconnect_db</span><span class="op">(</span><span class="op">)</span> <span class="co"># No need to reintroduce the path</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">projDB</span><span class="op">$</span><span class="fu">list_vars</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># Just listing variables</span></span>
<span><span class="co">#&gt;                   name       type source_file                 created_at</span></span>
<span><span class="co">#&gt; 1              MTCars0 data.frame        &lt;NA&gt; 2025-06-29 23:52:34.083163</span></span>
<span><span class="co">#&gt; 2     MTcars-Processed data.frame        &lt;NA&gt; 2025-06-29 23:52:34.087589</span></span>
<span><span class="co">#&gt; 3 cleaningInstructions data.frame        &lt;NA&gt; 2025-06-29 23:52:34.085787</span></span>
<span><span class="co">#&gt;                   updated_at</span></span>
<span><span class="co">#&gt; 1 2025-06-29 23:52:34.083163</span></span>
<span><span class="co">#&gt; 2 2025-06-29 23:52:34.087589</span></span>
<span><span class="co">#&gt; 3 2025-06-29 23:52:34.085787</span></span></code></pre></div>
<p>Now, let’s access the database using a second object:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myDB</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dbObj.html">dbObj</a></span><span class="op">(</span>dp_path <span class="op">=</span> <span class="va">dbPath</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">myDB</span><span class="op">$</span><span class="fu">list_vars</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                   name       type source_file                 created_at</span></span>
<span><span class="co">#&gt; 1              MTCars0 data.frame        &lt;NA&gt; 2025-06-29 23:52:34.083163</span></span>
<span><span class="co">#&gt; 2     MTcars-Processed data.frame        &lt;NA&gt; 2025-06-29 23:52:34.087589</span></span>
<span><span class="co">#&gt; 3 cleaningInstructions data.frame        &lt;NA&gt; 2025-06-29 23:52:34.085787</span></span>
<span><span class="co">#&gt;                   updated_at</span></span>
<span><span class="co">#&gt; 1 2025-06-29 23:52:34.083163</span></span>
<span><span class="co">#&gt; 2 2025-06-29 23:52:34.087589</span></span>
<span><span class="co">#&gt; 3 2025-06-29 23:52:34.085787</span></span></code></pre></div>
<p>And let’s create a source file to remove NAs and add the result as a
new variable:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create an R Script</span></span>
<span><span class="va">fConn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">file</a></span><span class="op">(</span><span class="st">"cleanMtcars.R"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span>con <span class="op">=</span> <span class="va">fConn</span>, text <span class="op">=</span> <span class="st">'</span></span>
<span><span class="st"># Removing NAs from processedMTcars</span></span>
<span><span class="st">cleansedMTcatrs &lt;- processedMTcars[complete.cases(processedMTcars),]</span></span>
<span><span class="st">'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">fConn</span><span class="op">)</span></span>
<span><span class="co"># Run the R Script</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">"cleanMtcars.R"</span><span class="op">)</span></span>
<span><span class="co"># Add the new variable and its source file to the dataset</span></span>
<span><span class="va">myDB</span><span class="op">$</span><span class="fu">add_var</span><span class="op">(</span>vname <span class="op">=</span> <span class="st">"MTcars-cleaned"</span>, <span class="va">cleansedMTcatrs</span>,</span>
<span>             steps <span class="op">=</span> <span class="st">"Remove NAs"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Saved variable: MTcars-cleaned</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">myDB</span><span class="op">)</span></span>
<span><span class="co">#&gt; SQLite Variable Storage Object</span></span>
<span><span class="co">#&gt; Database path: myProject.db </span></span>
<span><span class="co">#&gt; Connection status: Open </span></span>
<span><span class="co">#&gt; Stored items: 4 </span></span>
<span><span class="co">#&gt; Registered files: 0 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; items:</span></span>
<span><span class="co">#&gt;                   name       type source_file                 created_at</span></span>
<span><span class="co">#&gt; 1              MTCars0 data.frame        &lt;NA&gt; 2025-06-29 23:52:34.083163</span></span>
<span><span class="co">#&gt; 2     MTcars-Processed data.frame        &lt;NA&gt; 2025-06-29 23:52:34.087589</span></span>
<span><span class="co">#&gt; 3       MTcars-cleaned data.frame        &lt;NA&gt; 2025-06-29 23:52:34.377562</span></span>
<span><span class="co">#&gt; 4 cleaningInstructions data.frame        &lt;NA&gt; 2025-06-29 23:52:34.085787</span></span>
<span><span class="co">#&gt;                   updated_at</span></span>
<span><span class="co">#&gt; 1 2025-06-29 23:52:34.083163</span></span>
<span><span class="co">#&gt; 2 2025-06-29 23:52:34.087589</span></span>
<span><span class="co">#&gt; 3 2025-06-29 23:52:34.377562</span></span>
<span><span class="co">#&gt; 4 2025-06-29 23:52:34.085787</span></span></code></pre></div>
<p>Let’s check the first instance of the database:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">projDB</span><span class="op">$</span><span class="fu">list_vars</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                   name       type source_file                 created_at</span></span>
<span><span class="co">#&gt; 1              MTCars0 data.frame        &lt;NA&gt; 2025-06-29 23:52:34.083163</span></span>
<span><span class="co">#&gt; 2     MTcars-Processed data.frame        &lt;NA&gt; 2025-06-29 23:52:34.087589</span></span>
<span><span class="co">#&gt; 3       MTcars-cleaned data.frame        &lt;NA&gt; 2025-06-29 23:52:34.377562</span></span>
<span><span class="co">#&gt; 4 cleaningInstructions data.frame        &lt;NA&gt; 2025-06-29 23:52:34.085787</span></span>
<span><span class="co">#&gt;                   updated_at</span></span>
<span><span class="co">#&gt; 1 2025-06-29 23:52:34.083163</span></span>
<span><span class="co">#&gt; 2 2025-06-29 23:52:34.087589</span></span>
<span><span class="co">#&gt; 3 2025-06-29 23:52:34.377562</span></span>
<span><span class="co">#&gt; 4 2025-06-29 23:52:34.085787</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myDB</span><span class="op">$</span><span class="fu">close_db</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Database connection closed</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="descriptive-functions">Descriptive Functions<a class="anchor" aria-label="anchor" href="#descriptive-functions"></a>
</h3>
<p>The package offers a few simple functions that we have found useful
in summarizing and describing data.</p>
<div class="section level4">
<h4 id="con_table-creating-contingency-tables">
<code>con_table</code>: Creating contingency tables<a class="anchor" aria-label="anchor" href="#con_table-creating-contingency-tables"></a>
</h4>
<p>The following creates a contingency table between <code>vs</code> and
<code>gear</code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">projDB</span><span class="op">$</span><span class="fu">get_var</span><span class="op">(</span><span class="st">"MTcars-cleaned"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/cont_table.html">cont_table</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">vs</span><span class="op">~</span><span class="va">gear</span><span class="op">)</span></span>
<span><span class="co">#&gt;           gear</span></span>
<span><span class="co">#&gt; vs          3  4</span></span>
<span><span class="co">#&gt;   V-shape  12  2</span></span>
<span><span class="co">#&gt;   Straight  3 10</span></span></code></pre></div>
<p><code>con_table()</code> can use more than one variable for rows or
columns:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cont_table.html">cont_table</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">vs</span><span class="op">~</span><span class="va">gear</span><span class="op">+</span><span class="va">am</span><span class="op">)</span></span>
<span><span class="co">#&gt;           gear+am</span></span>
<span><span class="co">#&gt; vs         3-Manual 4-Automatic 4-Manual</span></span>
<span><span class="co">#&gt;   V-shape        12           2        0</span></span>
<span><span class="co">#&gt;   Straight        3           6        4</span></span></code></pre></div>
<p>This function can also count NAs, when needed:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">projDB</span><span class="op">$</span><span class="fu">get_var</span><span class="op">(</span><span class="st">"MTcars-Processed"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/cont_table.html">cont_table</a></span><span class="op">(</span><span class="va">y</span>, <span class="va">vs</span><span class="op">+</span><span class="va">am</span><span class="op">~</span><span class="va">gear</span>, useNA <span class="op">=</span> <span class="st">'ifany'</span><span class="op">)</span></span>
<span><span class="co">#&gt;                     gear</span></span>
<span><span class="co">#&gt; vs+am                 3  4 &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   Straight-Automatic  0  6    1</span></span>
<span><span class="co">#&gt;   Straight-Manual     3  4    0</span></span>
<span><span class="co">#&gt;   V-shape-Automatic   0  2    4</span></span>
<span><span class="co">#&gt;   V-shape-Manual     12  0    0</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="total_col-and-total_row-adding-marginal-sums-to-tables-and-data-frames">
<code>total_col()</code> and <code>total_row()</code>: Adding
Marginal Sums to Tables and Data.frames<a class="anchor" aria-label="anchor" href="#total_col-and-total_row-adding-marginal-sums-to-tables-and-data-frames"></a>
</h4>
<p>These functions can add total column and row to a count table and
data.frame:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cont_table.html">cont_table</a></span><span class="op">(</span><span class="va">y</span>, <span class="va">vs</span><span class="op">+</span><span class="va">am</span><span class="op">~</span><span class="va">gear</span>, useNA <span class="op">=</span> <span class="st">'ifany'</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/tableSummary.html">total_row</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/tableSummary.html">total_col</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                     3  4 &lt;NA&gt; Total.Col</span></span>
<span><span class="co">#&gt; Straight-Automatic  0  6    1         7</span></span>
<span><span class="co">#&gt; Straight-Manual     3  4    0         7</span></span>
<span><span class="co">#&gt; V-shape-Automatic   0  2    4         6</span></span>
<span><span class="co">#&gt; V-shape-Manual     12  0    0        12</span></span>
<span><span class="co">#&gt; Total.Row          15 12    5        32</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/tableSummary.html">total_row</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;                        vs        am gear   mpg cyl   disp   hp   drat      wt</span></span>
<span><span class="co">#&gt; Camaro Z28        V-shape    Manual    3  13.3   8  350.0  245   3.73   3.840</span></span>
<span><span class="co">#&gt; Pontiac Firebird  V-shape    Manual    3  19.2   8  400.0  175   3.08   3.845</span></span>
<span><span class="co">#&gt; Fiat X1-9        Straight Automatic    4  27.3   4   79.0   66   4.08   1.935</span></span>
<span><span class="co">#&gt; Porsche 914-2     V-shape Automatic   NA  26.0   4  120.3   91   4.43   2.140</span></span>
<span><span class="co">#&gt; Lotus Europa     Straight Automatic   NA  30.4   4   95.1  113   3.77   1.513</span></span>
<span><span class="co">#&gt; Ford Pantera L    V-shape Automatic   NA  15.8   8  351.0  264   4.22   3.170</span></span>
<span><span class="co">#&gt; Ferrari Dino      V-shape Automatic   NA  19.7   6  145.0  175   3.62   2.770</span></span>
<span><span class="co">#&gt; Maserati Bora     V-shape Automatic   NA  15.0   8  301.0  335   3.54   3.570</span></span>
<span><span class="co">#&gt; Volvo 142E       Straight Automatic    4  21.4   4  121.0  109   4.11   2.780</span></span>
<span><span class="co">#&gt; Total                &lt;NA&gt;      &lt;NA&gt;   NA 642.9 198 7383.1 4694 115.09 102.952</span></span>
<span><span class="co">#&gt;                    qsec carb</span></span>
<span><span class="co">#&gt; Camaro Z28        15.41    4</span></span>
<span><span class="co">#&gt; Pontiac Firebird  17.05    2</span></span>
<span><span class="co">#&gt; Fiat X1-9         18.90    1</span></span>
<span><span class="co">#&gt; Porsche 914-2     16.70    2</span></span>
<span><span class="co">#&gt; Lotus Europa      16.90    2</span></span>
<span><span class="co">#&gt; Ford Pantera L    14.50    4</span></span>
<span><span class="co">#&gt; Ferrari Dino      15.50    6</span></span>
<span><span class="co">#&gt; Maserati Bora     14.60    8</span></span>
<span><span class="co">#&gt; Volvo 142E        18.60    2</span></span>
<span><span class="co">#&gt; Total            571.16   90</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="describe_ds-generates-a-summary-of-variables">
<code>describe_ds()</code>: Generates a Summary of Variables<a class="anchor" aria-label="anchor" href="#describe_ds-generates-a-summary-of-variables"></a>
</h4>
<p>This function creates a summary of each variable, including the
counts of NAs, if any.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/describe_ds.html">describe_ds</a></span><span class="op">(</span><span class="va">y</span>, maxLevels <span class="op">=</span> <span class="fl">3</span>, var2row <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Numerical</span></span>
<span><span class="co">#&gt;       gear            mpg             cyl             disp      </span></span>
<span><span class="co">#&gt;  Min.   :3.000   Min.   :10.40   Min.   :4.000   Min.   : 71.1  </span></span>
<span><span class="co">#&gt;  1st Qu.:3.000   1st Qu.:15.43   1st Qu.:4.000   1st Qu.:120.8  </span></span>
<span><span class="co">#&gt;  Median :3.000   Median :19.20   Median :6.000   Median :196.3  </span></span>
<span><span class="co">#&gt;  Mean   :3.444   Mean   :20.09   Mean   :6.188   Mean   :230.7  </span></span>
<span><span class="co">#&gt;  3rd Qu.:4.000   3rd Qu.:22.80   3rd Qu.:8.000   3rd Qu.:326.0  </span></span>
<span><span class="co">#&gt;  Max.   :4.000   Max.   :33.90   Max.   :8.000   Max.   :472.0  </span></span>
<span><span class="co">#&gt;  NA's   :5                                                      </span></span>
<span><span class="co">#&gt;        hp             drat             wt             qsec      </span></span>
<span><span class="co">#&gt;  Min.   : 52.0   Min.   :2.760   Min.   :1.513   Min.   :14.50  </span></span>
<span><span class="co">#&gt;  1st Qu.: 96.5   1st Qu.:3.080   1st Qu.:2.581   1st Qu.:16.89  </span></span>
<span><span class="co">#&gt;  Median :123.0   Median :3.695   Median :3.325   Median :17.71  </span></span>
<span><span class="co">#&gt;  Mean   :146.7   Mean   :3.597   Mean   :3.217   Mean   :17.85  </span></span>
<span><span class="co">#&gt;  3rd Qu.:180.0   3rd Qu.:3.920   3rd Qu.:3.610   3rd Qu.:18.90  </span></span>
<span><span class="co">#&gt;  Max.   :335.0   Max.   :4.930   Max.   :5.424   Max.   :22.90  </span></span>
<span><span class="co">#&gt;                                                                 </span></span>
<span><span class="co">#&gt;       carb      </span></span>
<span><span class="co">#&gt;  Min.   :1.000  </span></span>
<span><span class="co">#&gt;  1st Qu.:2.000  </span></span>
<span><span class="co">#&gt;  Median :2.000  </span></span>
<span><span class="co">#&gt;  Mean   :2.812  </span></span>
<span><span class="co">#&gt;  3rd Qu.:4.000  </span></span>
<span><span class="co">#&gt;  Max.   :8.000  </span></span>
<span><span class="co">#&gt;                 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Categorical</span></span>
<span><span class="co">#&gt;      vs            am            </span></span>
<span><span class="co">#&gt; [1,]  V-shape:  18    Manual:  19</span></span>
<span><span class="co">#&gt; [2,] Straight:  14 Automatic:  13</span></span>
<span><span class="co">#&gt; [3,]</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="which_ds-searching-datasets-for-variables">
<code>which_ds()</code>: Searching datasets for variables<a class="anchor" aria-label="anchor" href="#which_ds-searching-datasets-for-variables"></a>
</h4>
<p>When dealing with multiple large datasets, we can use this functions
to see which one has the variable we have in mind:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/which_ds.html">which_ds</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Species'</span>, <span class="st">'am'</span>, <span class="st">'mpg'</span>, <span class="st">'gpm'</span><span class="op">)</span>, </span>
<span>         iris<span class="op">=</span><span class="va">iris</span>, x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt;          iris     x     y</span></span>
<span><span class="co">#&gt; Species  TRUE FALSE FALSE</span></span>
<span><span class="co">#&gt; am      FALSE  TRUE  TRUE</span></span>
<span><span class="co">#&gt; mpg     FALSE  TRUE  TRUE</span></span>
<span><span class="co">#&gt; gpm     FALSE FALSE FALSE</span></span></code></pre></div>
<p>A more visible format:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/which_ds.html">which_ds</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Species'</span>, <span class="st">'am'</span>, <span class="st">'mpg'</span>, <span class="st">'gpm'</span><span class="op">)</span>, </span>
<span>         iris<span class="op">=</span><span class="va">iris</span>, x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">y</span><span class="op">)</span><span class="op">+</span><span class="fl">0</span></span>
<span><span class="co">#&gt;         iris x y</span></span>
<span><span class="co">#&gt; Species    1 0 0</span></span>
<span><span class="co">#&gt; am         0 1 1</span></span>
<span><span class="co">#&gt; mpg        0 1 1</span></span>
<span><span class="co">#&gt; gpm        0 0 0</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="future-development">Future Development<a class="anchor" aria-label="anchor" href="#future-development"></a>
</h3>
<ul>
<li><p>Adding <code>respSummary</code> to summarize variables for
different levels of a categorical response.</p></li>
<li><p>Cross-Validation with different cost functions.</p></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mansour Abdoli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
