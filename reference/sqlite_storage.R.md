# SQLite Storage for improving Transparency and Reproducibility

sqlite_storage: A variable Variable Storage S3 Object with File Support
Requires: RSQLite, DBI packages

The code is initially generated by Claude Sonnet 4 Corrections and
modification were added by Mansour Abdoli, PhD

The main function consists of a path to the DB file and its connection.

Initialize Database Connection

Initialize database

Register a file in the database

Registering a file in a sqlite_storage object

Save Variable to Database with Provenance

Save variables in a sqlite_storage object

Save Variable from File with Processing Steps

Create a variable from a data file and save to a sqlite_storage object

Load file based on its type

Save detailed steps for a variable

Load Variable from Database

Get a variable from a sqlite_storage object

Get Variable Provenance

Get documented steps from a variable from a sqlite_storage object

List All items with Provenance

List variables in a sqlite_storage object

List All Registered Files

List files added to a sqlite_storage object

Check if Variable Exists

Check if a variable exists in a sqlite_storage object

Delete Variable

Remove a variable from a sqlite_storage object

Close Database Connection

Close a sqlite_storage's connection

isOpen: checks if the Database Connection is open

Checking if the connection is open

Print a sqlite_storage object

## Usage

``` r
sqlite_storage(db_path = "items.db")

initialize_db(obj)

# S3 method for class 'sqlite_storage'
initialize_db(obj)

register_file(obj, file_path)

# S3 method for class 'sqlite_storage'
register_file(obj, file_path)

save_var(obj, name, value, source_file = NULL, steps = NULL)

# S3 method for class 'sqlite_storage'
save_var(obj, name, value, source_file = NULL, steps = NULL)

save_file_var(obj, name, file_path, steps = NULL, processor = NULL)

# S3 method for class 'sqlite_storage'
save_file_var(obj, name, file_path, steps = NULL, processor = NULL)

load_file_by_type(file_path)

save_variable_steps(obj, var_name, steps)

load_var(obj, name)

# S3 method for class 'sqlite_storage'
load_var(obj, name)

get_provenance(obj, name)

# S3 method for class 'sqlite_storage'
get_provenance(obj, name)

list_vars(obj)

# S3 method for class 'sqlite_storage'
list_vars(obj)

list_files(obj)

# S3 method for class 'sqlite_storage'
list_files(obj)

var_exists(obj, name)

# S3 method for class 'sqlite_storage'
var_exists(obj, name)

delete_var(obj, name)

# S3 method for class 'sqlite_storage'
delete_var(obj, name)

disconnect_db(obj)

# S3 method for class 'sqlite_storage'
disconnect_db(obj)

isOpen_db(obj)

# S3 method for class 'sqlite_storage'
isOpen_db(obj)

# S3 method for class 'sqlite_storage'
print(x, ...)
```

## Arguments

- db_path:

  Character string specifying the path to the SQLite database file.
  Default is "items.db" in the current working directory.

- obj:

  An object of class "sqlite_storage"

- file_path:

  Path to the file

- name:

  Character string, name of the variable to delete

- value:

  Any R object to be stored

- source_file:

  Optional, path to source file used to create this variable

- steps:

  Character vector of steps

- processor:

  Optional, custom function to process the file. If NULL, uses default
  processors.

- var_name:

  Variable name

## Value

An object of class "sqlite_storage"

Loaded R object

The stored R object

Data frame with provenance information

A data frame with variable information including provenance

A data frame with file information

Logical, TRUE if variable exists

## Examples

``` r
if (FALSE) { # \dontrun{
# Create storage object
storage <- sqlite_storage("my_vars.db")

# Save and load items with provenance
save_var(storage, "x", c(1, 2, 3), source_file = "analysis.R",
         steps = "Created test vector")
x <- load_var(storage, "x")

# Store file-based items
save_file_var(storage, "data", "mydata.csv",
              steps = c("Load CSV", "Clean data", "Remove NAs"))

# Clean up
disconnect_db(storage)
} # }
```
